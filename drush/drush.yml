command:

  updatedb:
    options:
      # Don't clear the cache by default to avoid unnecessary work.
      #
      # @see https://www.bounteous.com/insights/2020/03/12/automated-drupal-deployment-and-rollback-recipes/#don%E2%80%99t-clear-all-caches-instead-selectively-clear-what-you-need
      cache-clear: 0

  user:
    login:
      options:
        # This prevents Drush automatically trying to launch the default browser
        # when generating a log in link.
        browser: 0

  ambientimpact:
    rsync:
      options:
        exclude-paths:
          - 'sites/*/settings.database.php'
          - 'sites/*/settings.local.php'
          # Added to prevent site-specific Drush config getting synced from
          # staging to live.
          - 'sites/all/drush/drush.yml'

        # This removes the two 'cache:rebuild' as rebuilding various caches on
        # Omnipedia is a big hit to the server and load time for the subsequent
        # request. If newly added modules or themes need to be picked up by
        # Drupal, run 'drush cc bootstrap' after the rsync. Other Drush commands
        # can be run to rebuild various things if needed, or if a command is not
        # available, use
        # drush php:eval "\Drupal::service('service_name')->serviceMethod()"
        # to perform other actions, such as rebuilding the router or library
        # definitions.
        target-post-drush-commands:
          - 'config:import'
          - 'updb'
